<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:tb="http://www.hardcodet.net/taskbar"
        xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero" 
        xmlns:cbox="clr-namespace:ScreenRecorder"
	    x:Class="ScreenRecorder.MainWindow" 
        Title="Markdown" 
        Height="600"
	    Width="1000" 
        Background="#FFFF" 
        BorderBrush="#FF3F3F46" 
        Foreground="#FFFFFFFF" 
        BorderThickness="0 0px 0 0"  WindowStyle="None"
    AllowsTransparency="True" StateChanged="Window_StateChanged" WindowStartupLocation="CenterScreen" ><!-- PreviewKeyDown="MainWindow_OnPreviewKeyDown">-->

    <Window.Resources>

        <ObjectDataProvider x:Key="RootFolderDataProvider" >
            <ObjectDataProvider.ObjectInstance>
                <cbox:Folder FullPath="c:\ScreenRecorder"/>
            </ObjectDataProvider.ObjectInstance>
        </ObjectDataProvider>

        <HierarchicalDataTemplate 
		    DataType    = "{x:Type cbox:Folder}"
            ItemsSource = "{Binding Path=Files}">
            <TextBlock Text="{Binding Path=Name}" />
        </HierarchicalDataTemplate>

    </Window.Resources>


    <Grid Margin="10 10 0 0">
        <Grid.RowDefinitions>
            <RowDefinition Height="20px" />
            <RowDefinition Height="auto" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="auto" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="2" >
            <Button x:Name="btnQuit" Content="-" Margin="0,0,9,0px" Height="20" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="40" Background="#FFB64040" BorderBrush="#FF333331" Foreground="White" Click="btnMinimize_Click"/>
        </Grid>
        <Expander Header="" ExpandDirection="Right" Margin="0,0,0,10" Grid.Row="1" Grid.RowSpan="2" Grid.Column="0">
            <TreeView x:Name="TrvStructure" Foreground="#ffffffff" BorderBrush="#FF3d3d3b" Background="#FF3d3d3b" Width="200px" Margin="10px 2px 10px 0px">

               
                    <TreeViewItem ItemsSource="{Binding Path=Files, Source={StaticResource RootFolderDataProvider}}" Header="ScreenRecorder"  />
                
                <TreeView.Style>
                    <Style TargetType="{x:Type TreeView}">
                        <Setter Property="FontFamily" Value="Helvetica neue" />
                        <Setter Property="FontSize" Value="12pt" />
                        <Setter Property="FontWeight" Value="Normal"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="FontStyle" Value="Normal"/>
                    </Style>
                </TreeView.Style>
            </TreeView>

        </Expander>

        <Grid  Grid.Row="1" Grid.Column="2" Grid.RowSpan="2" Margin="10px,5px,10px,10px">
            <Button Content="Button" HorizontalAlignment="Left" Margin="171,0,0,0" VerticalAlignment="Top" Width="75" Click="Button_Click"/>
            <Button x:Name="btnSave" Content="Save" HorizontalAlignment="Left" Margin="400,0,0,0" VerticalAlignment="Top" Width="75" Click="btnSave_Click"/>
            <!--<cbox:MarkDownBox IsLineNumbersMarginVisible="True" x:Name="Box" />-->
        </Grid>

        <tb:TaskbarIcon x:Name="MyNotifyIcon"
  IconSource="/res/Error.ico"
  ToolTipText="ScreenRecorder" PopupActivation="DoubleClick">
            

            <!-- Set a simple context menu  -->
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu
      Background="AliceBlue">
                    <MenuItem Header="_Ouvrir" Click="menuOpen_Click"/>
                    <Separator />
                    <MenuItem Header="Screenshots"/>
                    <MenuItem Header="Video Capture"/>
                    <Separator />
                    <MenuItem Header="Quitter" Click="menuQuit_Click"/>
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>
    </Grid>
</Window>
